# Travel Together API Server

## API Doc.

**λ°”λ΅κ°€κΈ°**

- [health-check](#health-check): μ„λ²„ μ ‘μ† ν…μ¤νΈλ¥Ό μ„ν• API
- [auth](#auth): μκ²© μ¦λ…κ³Ό κ΄€λ ¨λ API
- [accounts](#accounts) μ‚¬μ©μμ— μΆ…μ†μ μΈ μμ›μ— μ ‘κ·Όν•λ” API
- [travel-rooms](#travel-rooms) μ—¬ν–‰λ°© μμ›μ— μ ‘κ·Όν•λ” API

### health-check

#### μ—”νΈν¬μΈνΈ

```http
GET /ping
```

#### μ„¤λ…

μ„λ²„κ°€ μ‘λ‹µμ„ ν•  μ μλ” μƒνƒμΈμ§€ ν™•μΈν•©λ‹λ‹¤. μ‘λ‹µ κ°’μ— μλ―Έ μ—†λ” λ¬Έμμ—΄μ΄ ν¬ν•¨λ©λ‹λ‹¤.

#### μ‘λ‹µ μμ‹

```json
pong
```

### auth

#### μ—”νΈν¬μΈνΈ

```http
POST /auth/oauth/login
```

#### μ„¤λ…

OAuth2 μ„λΉ„μ¤(μΉ΄μΉ΄μ¤λ΅ λ΅κ·ΈμΈ)λ¥Ό μ κ³µν•λ” λ¦¬μ†μ¤ μ„λ²„λ¥Ό ν†µν•΄ λ΅κ·ΈμΈν•μ—¬ μ•΅μ„Έμ¤ν† ν°κ³Ό λ¦¬ν”„λ μ‹ν† ν°μ„ λ°κΈ‰λ°›μµλ‹λ‹¤.

#### μ”μ²­ ν—¤λ”

| ν‚¤           | κ°’               | μ„¤λ… |
| ------------ | ---------------- | ---- |
| Content-Type | application/json |      |

#### μ”μ²­ λ°”λ””

| μ΄λ¦„        | νƒ€μ…   | μ„¤λ…                                          | μ μ•½ μ΅°κ±΄                                                                       | ν•„μ μ—¬λ¶€ |
| ----------- | ------ | --------------------------------------------- | ------------------------------------------------------------------------------- | --------- |
| oauthServer | string | OAuthλ¥Ό μ§€μ›ν•λ” λ¦¬μ†μ¤ μ„λ²„λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤.    | [μ§€μ›ν•λ” λ¦¬μ†μ¤ μ„λ²„ λ¦¬μ¤νΈ](#oauth-resource-servers) μ¤‘ ν•λ‚μ κ°’μ„ κ°€μ§‘λ‹λ‹¤. | ν•„μ      |
| oauthId     | string | λ¦¬μ†μ¤ μ„λ²„μ—μ„ λ°κΈ‰ν•λ” μ‚¬μ©μμ κ³ μ  μ•„μ΄λ”” |                                                                                 | ν•„μ      |
| oauthToken  | string | λ¦¬μ†μ¤ μ„λ²„μ—μ„ λ°κΈ‰ν•λ” μ•΅μ„Έμ¤ ν† ν°          |                                                                                 | ν•„μ      |

#### μ‘λ‹µ λ°”λ””

| μ΄λ¦„         | νƒ€μ…    | μ„¤λ…                                                                                                                                                                      | μ μ•½ μ΅°κ±΄ | ν•„μ μ—¬λ¶€ |
| ------------ | ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | --------- |
| token        | string  | μ„λ²„ μμ›μ— λ€ν• μ ‘κ·Ό κ¶ν•μ„ μ…μ¦ν•κΈ° μ„ν• μ•΅μ„Έμ¤ ν† ν°. μ΄ κ°’μ„ `Authorization` ν—¤λ”μ— ν¬ν•¨μ‹μΌμ•Ό μ”μ²­μκ°€ λ΅κ·ΈμΈν• μ‚¬μ©μμ„μ„ μ„λ²„κ°€ μ• μ μλ‹¤. μ ν¨κΈ°κ°„μ΄ λΉ„κµμ  μ§§λ‹¤. |           | ν•„μ      |
| payload.exp  | integer | μ‘λ‹µ λ°”λ””μ tokenμ λ§λ£ μΌμ‹. Time since epochμ„ μ΄λ‹¨μ„λ΅ λ‚νƒ€λ‚Έ κ°’μ΄λ‹¤.                                                                                                 |           | ν•„μ      |
| payload.sub  | string  | κ°€μΉμ—¬ν–‰ API μ„λ²„μ—μ„ μƒμ„±ν• μ”μ²­μμ κ³ μ  μ•„μ΄λ””.                                                                                                                        |           | ν•„μ      |
| refreshToken | string  | μ ν¨κΈ°κ°„μ΄ μ§§μ€ token(μ•΅μ„Έμ¤ν† ν°)μ„ μ¬λ°κΈ‰ν•κΈ°μ„ν•΄ μ‚¬μ©λλ” λ¦¬ν”„λ μ‹ν† ν°.                                                                                                 |           | ν•„μ      |

#### μ‘λ‹µ μμ‹

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1Nzc1OTUyNjksInN1YiI6ImI3M2ViYTRlLWQzNzQtNDAyNC1hOTliLTA0ZjZmN2QwNzMyOSJ9.bsKH6U2bKSmWuiIdBTdkgdnv3QDg4DFGnGmLRDJCwLY",
  "payload": {
    "exp": 1577595269,
    "sub": "b73eba4e-d374-4024-a99b-04f6f7d07329"
  },
  "refreshToken": "33e5505df96946059ac590a4140388e1"
}
```

#### μ—”νΈν¬μΈνΈ

```http
GET /auth/refresh
```

#### μ„¤λ…

κ°€μΉμ—¬ν–‰ API μ„λ²„μ—μ„ λ°κΈ‰ν• λ¦¬ν”„λ μ‹ν† ν°μΌλ΅ μƒλ΅μ΄ μ•΅μ„Έμ¤ν† ν°μ„ λ°κΈ‰λ°›μµλ‹λ‹¤.

#### μ”μ²­ ν—¤λ”

| ν‚¤   | κ°’           | μ„¤λ…                                           |
| ---- | ------------ | ---------------------------------------------- |
| x-rt | λ¦¬ν”„λ μ‹ν† ν° | κ°€μΉμ—¬ν–‰ API μ„λ²„λ΅λ¶€ν„° λ°κΈ‰λ°›μ€ λ¦¬ν”„λ μ‹ ν† ν° |

#### μ‘λ‹µ μμ‹

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1Nzc1OTUzNjcsInN1YiI6ImI3M2ViYTRlLWQzNzQtNDAyNC1hOTliLTA0ZjZmN2QwNzMyOSJ9.m-zBp4qf0fOsmXvjn1utv8w-EatbAkxQImHJQDeGZOQ",
  "payload": {
    "exp": 1577595367,
    "sub": "b73eba4e-d374-4024-a99b-04f6f7d07329"
  },
  "refreshToken": "33e5505df96946059ac590a4140388e1"
}
```

### accounts

#### μ—”νΈν¬μΈνΈ

```http
GET /me/profile
```

#### μ„¤λ…

μμ‹ μ ν”„λ΅ν•„μ„ μ΅°νν•©λ‹λ‹¤.

#### μ”μ²­ ν—¤λ”

| ν‚¤            | κ°’                                                                                               | μ„¤λ… |
| ------------- | ------------------------------------------------------------------------------------------------ | ---- |
| Authorization | [ν† ν° μ ν•](#ν† ν°-μ ν•)κ³Ό κ°€μΉμ—¬ν–‰ APIμ„λ²„μ—μ„ λ°κΈ‰ν• μ•΅μ„Έμ¤ν† ν°μ„ κ³µλ°±(' ')μΌλ΅ μ΄μ–΄λ¶™μΈ λ¬Έμμ—΄ |      |

#### μ‘λ‹µ λ°”λ””

| μ΄λ¦„            | νƒ€μ…    | μ„¤λ…                                                                                 | μ μ•½ μ΅°κ±΄ | ν•„μ μ—¬λ¶€ |
| --------------- | ------- | ------------------------------------------------------------------------------------ | --------- | --------- |
| id              | string  | κ°€μΉμ—¬ν–‰ APIμ„λ²„μ—μ„ μƒμ„±ν• μ‚¬μ©μμ κ³ μ  μ•„μ΄λ””                                     |           | ν•„μ      |
| name            | string  | μ‚¬μ©μμ λ‹‰λ„¤μ„. OAuthλ΅ λ΅κ·ΈμΈν• κ²½μ° λ¦¬μ†μ¤μ„λ²„μ— μ„¤μ •λ κ°’μ΄ λ””ν΄νΈμ„.            |           | ν•„μ      |
| profileImageUrl | string? | μ‚¬μ©μμ ν”„λ΅ν•„ μ‚¬μ§„μ url. OAuthλ΅ λ΅κ·ΈμΈν• κ²½μ° λ¦¬μ†μ¤μ„λ²„μ— μ„¤μ •λ κ°’μ΄ λ””ν΄νΈμ„. |           | μ„ νƒ      |
| createdAt       | date    | κ³„μ • μƒμ„± μΌμ‹. OAuthλ΅ λ΅κ·ΈμΈν• κ²½μ° μµμ΄λ΅ λ΅κ·ΈμΈν• μΌμ‹μ„.                        |           | ν•„μ      |
| statusMessage   | string? | μƒνƒ λ©”μ‹μ§€. μ„¤μ •ν•μ§€ μ•μ€ κ²½μ° null.                                                |           | μ„ νƒ      |

#### μ‘λ‹µ μμ‹

```json
{
  "id": "b73eba4e-d374-4024-a99b-04f6f7d07329",
  "name": "κΉ€μμ§€",
  "profileImageUrl": "http://k.kakaocdn.net/dn/cTh9DU/btqAq8c1skY/qTs4K8Ujh9oUffurqrTGPK/img_640x640.jpg",
  "createdAt": "2019-12-23T15:57:29.344Z",
  "statusMessage": null
}
```

#### μ—”νΈν¬μΈνΈ

```http
GET /me/travel-rooms
```

#### μ„¤λ…

μμ‹ μ΄ μ†ν•΄μλ” μ—¬ν–‰λ°© λ¦¬μ¤νΈλ¥Ό μ΅°νν•©λ‹λ‹¤. κ° μ—¬ν–‰λ°©μ—λ” λ©¤λ²„μ™€ λ‚λΌ λ¦¬μ¤νΈκ°€ ν¬ν•¨λ©λ‹λ‹¤.

#### μ”μ²­ ν—¤λ”

| ν‚¤            | κ°’                                                                                               | μ„¤λ… |
| ------------- | ------------------------------------------------------------------------------------------------ | ---- |
| Authorization | [ν† ν° μ ν•](#ν† ν°-μ ν•)κ³Ό κ°€μΉμ—¬ν–‰ APIμ„λ²„μ—μ„ λ°κΈ‰ν• μ•΅μ„Έμ¤ν† ν°μ„ κ³µλ°±(' ')μΌλ΅ μ΄μ–΄λ¶™μΈ λ¬Έμμ—΄ |      |

#### μ‘λ‹µ λ°”λ””

| μ΄λ¦„                       | νƒ€μ…    | μ„¤λ…                                                 | μ μ•½ μ΅°κ±΄ | ν•„μ μ—¬λ¶€ |
| -------------------------- | ------- | ---------------------------------------------------- | --------- | --------- |
| id                         | string  | κ°€μΉμ—¬ν–‰ APIμ„λ²„μ—μ„ μƒμ„±ν• μ—¬ν–‰λ°©μ κ³ μ  μ•„μ΄λ””.    |           | ν•„μ      |
| name                       | string  | μ—¬ν–‰λ°©μ μ΄λ¦„.                                       |           | ν•„μ      |
| startDate                  | date?   | μ—¬ν–‰ μ‹μ‘ μΌμ‹.                                      |           | μ„ νƒ      |
| endDate                    | date?   | μ—¬ν–‰ λ§μ§€λ§‰ μΌμ‹.                                    |           | μ„ νƒ      |
| coverImagePath             | string? | μ—¬ν–‰λ°© μ»¤λ²„ μ΄λ―Έμ§€ url.                              |           | μ„ νƒ      |
| createdDate                | date    | μ—¬ν–‰λ°© μƒμ„± μΌμ‹.                                    |           | ν•„μ      |
| members[i].id              | string  | κ°€μΉμ—¬ν–‰ APIμ„λ²„μ—μ„ μƒμ„±ν• κ° λ©¤λ²„μ κ³ μ  μ•„μ΄λ””.   |           | ν•„μ      |
| members[i].name            | string  | κ° λ©¤λ²„μ λ‹‰λ„¤μ„.                                    |           | ν•„μ      |
| members[i].statusMessage   | string? | κ° λ©¤λ²„μ μƒνƒ λ©”μ‹μ§€.                               |           | μ„ νƒ      |
| members[i].profileImageUrl | string? | κ° λ©¤λ²„μ ν”„λ΅ν•„ μ΄λ―Έμ§€ url.                         |           | μ„ νƒ      |
| members[i].createdAt       | date    | κ° λ©¤λ²„μ κ³„μ • μƒμ„± μΌμ‹.                            |           | ν•„μ      |
| countries[i].code          | string  | κ° κµ­κ°€μ μ½”λ“. λ¶€λ΅μ [κµ­κ°€ μ½”λ“](#κµ­κ°€-μ½”λ“) μ°Έκ³ . |           | ν•„μ      |
| countries[i].nameInKorean  | string  | κ° κµ­κ°€μ ν•κµ­ μ΄λ¦„. (μ: λ€ν•λ―Όκµ­)                  |           | ν•„μ      |
| countries[i].nameInEnglish | string  | κ° κµ­κ°€μ μμ–΄ μ΄λ¦„. (μ: Korea)                     |           | ν•„μ      |
| countries[i].emoji         | string? | κ° κµ­κ°€μ κµ­κΈ° μ΄λ¨μ§€. (μ: π‡°π‡·)                      |           | μ„ νƒ      |

#### μ‘λ‹µ μμ‹

```json
[
  {
    "id": "86ec949a-c1fb-4090-9ec9-c89853c7cf33",
    "name": "μΆ‹μ€ μ—¬ν–‰2",
    "startDate": null,
    "endDate": null,
    "coverImagePath": "travel-room/cover-image/86ec949a-c1fb-4090-9ec9-c89853c7cf33.jpeg",
    "createdDate": "2019-12-25T05:17:42.696Z",
    "members": [
      {
        "id": "b73eba4e-d374-4024-a99b-04f6f7d07329",
        "name": "κΉ€μμ§€",
        "statusMessage": null,
        "profileImageUrl": "http://k.kakaocdn.net/dn/cTh9DU/btqAq8c1skY/qTs4K8Ujh9oUffurqrTGPK/img_640x640.jpg",
        "createdAt": "2019-12-23T15:57:29.344Z"
      }
    ],
    "countries": [
      {
        "code": "KR",
        "nameInKorean": "λ€ν•λ―Όκµ­",
        "nameInEnglish": "Korea",
        "emoji": "π‡°π‡·"
      },
      {
        "code": "US",
        "nameInKorean": "λ―Έκµ­",
        "nameInEnglish": "America",
        "emoji": "π‡Ίπ‡Έ"
      }
    ]
  },
  {
    "id": "b3c99e80-b1a3-418a-9d09-9e1bdb0a5c91",
    "name": "μΆ‹μ€ μ—¬ν–‰2",
    "startDate": null,
    "endDate": "2023-06-07T14:34:08.700Z",
    "coverImagePath": null,
    "createdDate": "2019-12-25T05:41:46.830Z",
    "members": [
      {
        "id": "b73eba4e-d374-4024-a99b-04f6f7d07329",
        "name": "κΉ€μμ§€",
        "statusMessage": null,
        "profileImageUrl": "http://k.kakaocdn.net/dn/cTh9DU/btqAq8c1skY/qTs4K8Ujh9oUffurqrTGPK/img_640x640.jpg",
        "createdAt": "2019-12-23T15:57:29.344Z"
      }
    ],
    "countries": []
  }
]
```

### travel-rooms

#### μ—”νΈν¬μΈνΈ

```http
POST /travel-rooms
```

#### μ„¤λ…

μƒ μ—¬ν–‰λ°©μ„ κ°μ„¤ν•©λ‹λ‹¤.

#### μ”μ²­ ν—¤λ”

| ν‚¤            | κ°’                                                                                               | μ„¤λ… |
| ------------- | ------------------------------------------------------------------------------------------------ | ---- |
| Authorization | [ν† ν° μ ν•](#ν† ν°-μ ν•)κ³Ό κ°€μΉμ—¬ν–‰ APIμ„λ²„μ—μ„ λ°κΈ‰ν• μ•΅μ„Έμ¤ν† ν°μ„ κ³µλ°±(' ')μΌλ΅ μ΄μ–΄λ¶™μΈ λ¬Έμμ—΄ |      |
| Content-Type  | application/json                                                                                 |      |

#### μ”μ²­ λ°”λ””

| μ΄λ¦„      | νƒ€μ…      | μ„¤λ…           | μ μ•½ μ΅°κ±΄              | ν•„μ μ—¬λ¶€ |
| --------- | --------- | -------------- | ---------------------- | --------- |
| name      | string    | μ—¬ν–‰λ°© μ΄λ¦„    |                        | ν•„μ      |
| startDate | date?     | μ—¬ν–‰ μ‹μ‘ μΌμ‹ |                        | μ„ νƒ      |
| endDate   | date?     | μ—¬ν–‰ μΆ…λ£ μΌμ‹ |                        | μ„ νƒ      |
| countries | Country[] | κµ­κ°€ λ¦¬μ¤νΈ    | λ°°μ—΄ μ”μ† κ°―μλ” 0μ΄μƒ | ν•„μ      |

#### μ‘λ‹µ λ°”λ””

| μ΄λ¦„           | νƒ€μ…   | μ„¤λ…                                              | μ μ•½ μ΅°κ±΄ | ν•„μ μ—¬λ¶€ |
| -------------- | ------ | ------------------------------------------------- | --------- | --------- |
| id             | string | κ°€μΉμ—¬ν–‰ APIμ„λ²„μ—μ„ μƒμ„±ν• μ—¬ν–‰λ°©μ κ³ μ  μ•„μ΄λ””. |           | ν•„μ      |
| name           | string | μ”μ²­μ‹ μ „λ‹¬ν• μ—¬ν–‰λ°©μ μ΄λ¦„.                      |           | ν•„μ      |
| startDate      | date?  | μ”μ²­μ‹ μ„ νƒμ μΌλ΅ μ „λ‹¬ν• μ—¬ν–‰ μ‹μ‘ μΌμ‹.          |           | μ„ νƒ      |
| endDate        | date?  | μ”μ²­μ‹ μ„ νƒμ μΌλ΅ μ „λ‹¬ν• μ—¬ν–‰ μΆ…λ£ μΌμ‹.          |           | μ„ νƒ      |
| coverImagePath | date?  | μ—¬ν–‰λ°© μ»¤λ²„ μ΄λ―Έμ§€. μ—¬ν–‰λ°© μµμ΄ μƒμ„±μ‹μ—λ” null.  |           | μ„ νƒ      |
| createdDate    | date   | μ—¬ν–‰λ°© μƒμ„± μΌμ‹                                  |           | ν•„μ      |

#### μ‘λ‹µ μμ‹

```json
{
  "id": "1c26b13b-9649-427e-b68a-aeadcb27662d",
  "name": "λ―Έκµ­, μΌλ³Έ, νΈμ£Ό",
  "startDate": null,
  "endDate": null,
  "coverImagePath": null,
  "createdDate": "2019-12-29T05:40:59.799Z"
}
```

#### μ—”νΈν¬μΈνΈ

```http
GET /travel-rooms/cover-image/upload-url
```

#### μ„¤λ…

μ—¬ν–‰λ°© μ»¤λ²„ μ΄λ―Έμ§€ μ—…λ΅λ“λ¥Ό μ„ν• urlμ„ μ΅°νν•©λ‹λ‹¤.
μ΅°νλλ” urlμ€ AWSμ—μ„ μ κ³µν•λ” Signing urlλ΅, μ ν¨κΈ°κ°„μ΄ μ΅΄μ¬ν•©λ‹λ‹¤. ν„μ¬λ” 30μ΄.
μ„±κ³µμ μΌλ΅ urlμ„ μ΅°νν• κ²½μ°, ν•΄λ‹Ή urlλ΅ μ΄λ―Έμ§€λ¥Ό μ „μ†΅ν•λ©΄ ν•΄λ‹Ή μ—¬ν–‰λ°©μ μ»¤λ²„ μ΄λ―Έμ§€κ°€ λ³€κ²½λ©λ‹λ‹¤.
μ΄λ―Έμ§€λ¥Ό μ—…λ΅λ“ν•  κ²ƒμ΄ ν™•μ‹¤ν• μ‹μ μ— μ΄ APIλ¥Ό νΈμ¶ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤.

#### μ”μ²­ ν—¤λ”

| ν‚¤            | κ°’                                                                                               | μ„¤λ… |
| ------------- | ------------------------------------------------------------------------------------------------ | ---- |
| Authorization | [ν† ν° μ ν•](#ν† ν°-μ ν•)κ³Ό κ°€μΉμ—¬ν–‰ APIμ„λ²„μ—μ„ λ°κΈ‰ν• μ•΅μ„Έμ¤ν† ν°μ„ κ³µλ°±(' ')μΌλ΅ μ΄μ–΄λ¶™μΈ λ¬Έμμ—΄ |      |

#### μΏΌλ¦¬ νλΌλ―Έν„°

|νλΌλ―Έν„° | κ°’| μ„¤λ… |
| ---- | ---- | --- |
| travelRoomId | μ»¤λ²„ μ΄λ―Έμ§€λ¥Ό λ³€κ²½ν•  μ—¬ν–‰λ°©μ κ³ μ  μ•„μ΄λ”” |  |

#### μ‘λ‹µ λ°”λ””

| μ΄λ¦„           | νƒ€μ…   | μ„¤λ…                                              | μ μ•½ μ΅°κ±΄ | ν•„μ μ—¬λ¶€ |
| -------------- | ------ | ------------------------------------------------- | --------- | --------- |
|signedUrl|string | μ—¬ν–‰λ°© μ»¤λ²„ μ΄λ―Έμ§€λ¥Ό μ „μ†΅ν•μ—¬ μ—…λ΅λ“ ν•  μ μλ” url. | λ§λ£κΈ°ν•μ΄ μ΅΄μ¬ | ν•„μ |


#### μ‘λ‹µ μμ‹

```json
{
    "signedUrl": "https://travel-together2.s3.amazonaws.com/travel-room/cover-image/86ec949a-c1fb-4090-9ec9-c89853c7cf33.jpeg?Content-Type=image%2Fjpeg&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIA5KWQOYF7SUMU33GN%2F20191229%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20191229T055140Z&X-Amz-Expires=300&X-Amz-Signature=6cb1b6d24809792d2e4783e3479072ca5f3978c50053ef00b05a2157421f55cb&X-Amz-SignedHeaders=host"
}
```

## λ¶€λ΅

### Enums

#### Country

KR

### OAuth Resource Servers

- kakao

### ν† ν° μ ν•

- Bearer

### κµ­κ°€ μ½”λ“

μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ ν†µμ‹  κ³Όμ •μ—μ„ μ‚¬μ©λλ” λ¨λ“  κµ­κ°€μ½”λ“λ” [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)μ— λ…μ‹λμ–΄μμ–΄μ•Ό ν•λ‹¤.
